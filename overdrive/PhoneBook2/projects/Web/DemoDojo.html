<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
        <head>
                <title>DojoJayrocksDemo</title>
                <meta name="GENERATOR" content="Microsoft Visual Studio .NET 7.1">
                <meta name=ProgId content=VisualStudio.HTML>
                <meta name=Originator content="Microsoft Visual Studio .NET 7.1">
                <script language="javascript" src="Demo.ashx?proxy&v=2"></script>
                <script language="javascript" src="js/dojo/dojo.js"></script>
                <script language="javascript">
                    dojo.require("dojo.io.*");
                    dojo.require("dojo.event.*");
                    dojo.require("dojo.html.*");
                    dojo.require("dojo.json");

                    function dojoChannel(call)
                    {
                        var bindArgs = {
                            url: call.url+'?rpc',
                            error: function(type, data, evt){alert("error");},
                            method: "POST",
                            mimetype: "text/json",
                            handle: call.callback,
                            postContent:  dojo.json.serialize(call.request)
                        };
                        var req = dojo.io.bind(bindArgs);
                        dojo.event
                        return req;
                    }

                    function handleResponse(type, data, evt)
                    {
                        var arr = data.result;
                        var theDiv = dojo.byId('theDiv');
                        var select = document.createElement('select');
                        for(var i=0; i < arr.length; i++)
                        {
                            select.options[i] = new Option(arr[i], arr[i]);
                        }
                        theDiv.appendChild(select);
                    }

                    function getArray()
                    {
                        DemoService.rpc.getStringArray(handleResponse).call(dojoChannel);
                    }

                    dojo.event.connect(window, "onload", getArray);
                </script>
        </head>
    <body>
        <div id="theDiv"></div>
    </body>
</html> 