<?xml version="1.0" encoding="utf-8" ?> 
<!DOCTYPE objects PUBLIC "-//SPRING//DTD OBJECT//EN"
  "http://www.springframework.net/dtd/spring-objects.dtd">
<objects>

 <!-- FieldTable -->
 				
	<object id="FieldTable" type="Nexus.Core.Tables.FieldTable">
		<property name="AddFieldContexts">
			<list>
				<ref object="last_name"/> 
				<ref object="first_name"/> 
				<ref object="extension"/> 
				<ref object="user_name"/> 
				<ref object="hired"/> 
				<ref object="hours"/> 				
				<ref object="_filter"/> 
				<ref object="_extension_list"/>
				<ref object="_hired_list"/>
			</list>
		</property>
		<property name="AddProcessors">
			<list>
				<ref object="DateTimeProcessor"/> 
				<ref object="TelephoneProcessor"/> 
				<ref object="EntryListProcessor"/> 
				<ref object="ExtensionListProcessor"/>
				<ref object="HiredListProcessor"/>
			</list>
		</property>
	</object>

	<object id="last_name" parent="BaseFieldContext">
		<property name="ID"><value>last_name</value></property>	
		<property name="Label"><value>Last Name</value></property>	
	</object>

	<object id="first_name" parent="BaseFieldContext">
		<property name="ID"><value>first_name</value></property>	
		<property name="Label"><value>First Name</value></property>	
	</object>

	<object id="user_name" parent="BaseFieldContext">
		<property name="ID"><value>user_name</value></property>	
		<property name="Label"><value>User ID</value></property>	
	</object>
	
	<object id="extension" parent="BaseFieldContext">
		<property name="ID"><value>extension</value></property>		
		<property name="ProcessorID"><value>TelephoneProcessor</value></property>
		<property name="Label"><value>Extension</value></property>	
	</object>

	<object id="hired" parent="BaseFieldContext">
		<property name="ID"><value>hired</value></property>	
		<property name="Alert"><value>{0} must be a valid date</value></property>
		<property name="ProcessorID"><value>DateTimeProcessor</value></property>
		<property name="Label"><value>Hired</value></property>	
	</object>
	
	<object id="hours" parent="BaseFieldContext">
		<property name="ID"><value>hours</value></property>	
		<property name="Label"><value>Hours</value></property>	
	</object>
	

	<!-- We need to "hash" the name with "_" to avoid conflict with the filter Command -->
	<object id="_filter" parent="BaseFieldContext">
		<property name="ID"><value>filter</value></property>
		<property name="ProcessorID"><value>EntryListProcessor</value></property>
	</object>
		
	<object id="_extension_list" parent="BaseFieldContext">
		<property name="ID"><value>extension_list</value></property>
		<property name="ProcessorID"><value>ExtensionListProcessor</value></property>
	</object>

	<object id="_hired_list" parent="BaseFieldContext">
		<property name="ID"><value>hired_list</value></property>
		<property name="ProcessorID"><value>HiredListProcessor</value></property>
	</object>

 		<!-- "d" is .NET for "short date" --> 
	<object id="DateTimeProcessor" type="Nexus.Core.Validators.DateTimeProcessor">
		<property name="ID"><value>DateTimeProcessor</value></property>
		<property name="DataFormat"><value>d</value></property>
	</object>
	
	<object id="TelephoneProcessor" type="PhoneBook.Core.TelephoneProcessor">
		<property name="ID"><value>TelephoneProcessor</value></property>
	</object>

	<object id="EntryListProcessor" type="PhoneBook.Core.AppEntryListProcessor">
		<property name="ID"><value>EntryListProcessor</value></property>
	</object>
	
	<object id="ExtensionListProcessor" parent="BaseKeyValueProcessor">
		<property name="ID"><value>ExtensionListProcessor</value></property>
		<property name="Key"><value>extension</value></property>
	</object>
	
	<object id="HiredListProcessor" parent="BaseKeyValueProcessor">
		<property name="ID"><value>HiredListProcessor</value></property>
		<property name="Key"><value>hired</value></property>
	</object>

 <!-- Catalog -->
 
	<object id="Catalog" type="Nexus.Extras.Spring.Catalog"/>
 

<!-- Request Processors -->
	
  <object id="convert_input" type="Nexus.Core.Validators.ConvertInput">
    <property name="ID"><value>ConvertInput</value></property>
    <property name="Required"><value>{0} is required.</value></property>
  </object>

  <object id="format_output" type="Nexus.Core.Validators.FormatOutput">
    <property name="ID"><value>FormatOutput</value></property>    
    <property name="Required"><value>{0} is required.</value></property>
  </object>
  
<!-- pre-op -->

  <object id="pre-op" parent="BaseChain">
	<property name="AddCommands">
		<list>
			<ref object="convert_input"/>
		</list>   
    </property>           
  </object>  

  
<!-- post-op -->

  <object id="post-op" parent="BaseChain">
	<property name="AddCommands">
		<list>
			<ref object="format_output"/>
		</list>   
    </property>           
  </object>
    		

</objects>