<?xml version="1.0"?>


<!DOCTYPE faces-config PUBLIC
  "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.1//EN"
  "http://java.sun.com/dtd/web-facesconfig_1_1.dtd">


<!--

 Copyright 2004-2005 The Apache Software Foundation.
 
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at
 
      http://www.apache.org/licenses/LICENSE-2.0
 
 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

-->


<faces-config>


  <!-- ====================== Application Management ======================= -->


  <application>
    <locale-config>
      <default-locale>en</default-locale>
      <supported-locale>en</supported-locale>
      <supported-locale>fr</supported-locale>
      <supported-locale>de</supported-locale>
      <supported-locale>es</supported-locale>
    </locale-config>
  </application>


  <!-- ====================== Locale Select Dialog ========================= -->


  <!-- ViewController Beans -->

  <managed-bean>
    <managed-bean-name>locale$select</managed-bean-name>
    <managed-bean-class>
      org.apache.shale.usecases.locale.Select
    </managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
  </managed-bean>

  <!-- Navigation Rules -->

  <navigation-rule>
    <from-view-id>*</from-view-id>
    <navigation-case>
      <from-outcome>locale$select</from-outcome>
      <to-view-id>/locale/select.jsp</to-view-id>
    </navigation-case>
    <navigation-case>
      <from-action>#{locale$select.select}</from-action>
      <from-outcome>locale$success</from-outcome>
      <to-view-id>/usecases.jsp</to-view-id>
    </navigation-case>
    <navigation-case>
      <from-action>#{locale$select.select}</from-action>
      <from-outcome>locale$failure</from-outcome>
      <to-view-id>/usecases.jsp</to-view-id>
    </navigation-case>
  </navigation-rule>


  <!-- =========================== Logon Dialog ============================ -->


  <!-- DialogController Bean -->

  <managed-bean>
    <description>
      Overall controller for the logon dialog.  Functional behavior of this
      dialog is affected by the initialization properties configured below.
    </description>
    <display-name>Logon Dialog</display-name>
    <managed-bean-name>logon$dialog</managed-bean-name>
    <managed-bean-class>
      org.apache.shale.usecases.logon.Dialog
    </managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
    <managed-property>
      <description>
        Flag indicating that email confirmation must be sent and received
        before a newly created username is activated.
      </description>
      <display-name>Confirmation Flag</display-name>
      <property-name>confirmation</property-name>
      <property-class>boolean</property-class>
      <value>false</value>
    </managed-property>
    <managed-property>
      <description>
        Flag indicating that "remember me" cookies should be sent and
        received.
      </description>
      <display-name>Remember Me Flag</display-name>
      <property-name>rememberMe</property-name>
      <property-class>boolean</property-class>
      <value>true</value>
    </managed-property>
  </managed-bean>

  <!-- ViewController Beans -->

  <managed-bean>
    <managed-bean-name>logon$logon</managed-bean-name>
    <managed-bean-class>
      org.apache.shale.usecases.logon.Logon
    </managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
  </managed-bean>

  <managed-bean>
    <managed-bean-name>logon$profile1</managed-bean-name>
    <managed-bean-class>
      org.apache.shale.usecases.logon.Profile1
    </managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
  </managed-bean>

  <managed-bean>
    <managed-bean-name>logon$profile2</managed-bean-name>
    <managed-bean-class>
      org.apache.shale.usecases.logon.Profile2
    </managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
  </managed-bean>

  <managed-bean>
    <managed-bean-name>logon$profile3</managed-bean-name>
    <managed-bean-class>
      org.apache.shale.usecases.logon.Profile3
    </managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
  </managed-bean>

  <!-- Navigation Rules -->

  <navigation-rule>
    <from-view-id>*</from-view-id>
    <navigation-case>
      <from-outcome>logon$authenticated</from-outcome>
      <to-view-id>/usecases.jsp</to-view-id>
    </navigation-case>
    <navigation-case>
      <from-outcome>logon$logon</from-outcome>
      <to-view-id>/logon/logon.jsp</to-view-id>
    </navigation-case>
    <navigation-case>
      <from-outcome>logon$profile1</from-outcome>
      <to-view-id>/logon/profile1.jsp</to-view-id>
    </navigation-case>
    <navigation-case>
      <from-outcome>logon$profile2</from-outcome>
      <to-view-id>/logon/profile2.jsp</to-view-id>
    </navigation-case>
    <navigation-case>
      <from-outcome>logon$profile3</from-outcome>
      <to-view-id>/logon/profile3.jsp</to-view-id>
    </navigation-case>
    <navigation-case>
      <from-outcome>logon$unauthenticated</from-outcome>
      <to-view-id>/usecases.jsp</to-view-id>
    </navigation-case>
  </navigation-rule>


  <!-- ===================== Miscellaneous Facilities ====================== -->


  <managed-bean>
    <description>
      Utility class to return locale-specific domains (lists of selection items)
      based on the locale of the current request.
    </description>
    <managed-bean-name>domains</managed-bean-name>
    <managed-bean-class>
      org.apache.shale.usecases.view.Domains
    </managed-bean-class>
    <managed-bean-scope>application</managed-bean-scope>
  </managed-bean>


  <managed-bean>
    <description>
      Business logic used to manipulate registered user profile
      information, and authenticate logons.
    </description>
    <managed-bean-name>logon$logic</managed-bean-name>
    <managed-bean-class>
      org.apache.shale.usecases.logic.LogonLogic
    </managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <managed-property>
      <property-name>dao</property-name>
      <property-class>org.apache.shale.usecases.model.UsersDAO</property-class>
      <value>#{logon$users}</value>
    </managed-property>
  </managed-bean>


  <managed-bean>
    <description>
      Data Access Object (DAO) used to manipulate registered user profile
      information.
    </description>
    <managed-bean-name>logon$users</managed-bean-name>
    <managed-bean-class>
      org.apache.shale.usecases.model.minimal.MinimalUsersDAO
    </managed-bean-class>
    <managed-bean-scope>application</managed-bean-scope>
  </managed-bean>


</faces-config>
